<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Target Management Board</title>
    <link rel="stylesheet" href="/static/styles/kanban.css">
</head>
<body>
    <div class="header">
        <h1>Target Management Board</h1>
        <div class="search-container">
            <input type="text" class="search-input" placeholder="Search organizations..." id="searchInput">
            <span class="search-clear" id="searchClear" onclick="clearSearch()">×</span>
        </div>
    </div>

    <div class="board-container">
        <div class="board">
            <div class="column" id="not-contacted" ondrop="drop(event)" ondragover="allowDrop(event)">
                <div class="column-header">
                    <span>Not Contacted</span>
                    <div style="display: flex; align-items: center;">
                        <span class="column-count">0</span>
                        <div class="sort-button-container">
                            <button class="sort-button" onclick="toggleSort(this, 'not-contacted')">⋮</button>
                            <div class="sort-menu">
                                <div class="sort-option" onclick="handleSort('not-contacted', 'organization', 'asc')">Sort by Name (A-Z)</div>
                                <div class="sort-option" onclick="handleSort('not-contacted', 'organization', 'desc')">Sort by Name (Z-A)</div>
                                <div class="sort-option" onclick="handleSort('not-contacted', 'population', 'desc')">Sort by Population ↓</div>
                                <div class="sort-option" onclick="handleSort('not-contacted', 'population', 'asc')">Sort by Population ↑</div>
                                <div class="sort-option" onclick="handleSort('not-contacted', 'income', 'desc')">Sort by Income ↓</div>
                                <div class="sort-option" onclick="handleSort('not-contacted', 'income', 'asc')">Sort by Income ↑</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="cards-container"></div>
            </div>

            <div class="column" id="initial-contact" ondrop="drop(event)" ondragover="allowDrop(event)">
                <div class="column-header">
                    <span>Initial Contact</span>
                    <div style="display: flex; align-items: center;">
                        <span class="column-count">0</span>
                        <div class="sort-button-container">
                            <button class="sort-button" onclick="toggleSort(this, 'initial-contact')">⋮</button>
                            <div class="sort-menu">
                                <div class="sort-option" onclick="handleSort('initial-contact', 'organization', 'asc')">Sort by Name (A-Z)</div>
                                <div class="sort-option" onclick="handleSort('initial-contact', 'organization', 'desc')">Sort by Name (Z-A)</div>
                                <div class="sort-option" onclick="handleSort('initial-contact', 'population', 'desc')">Sort by Population ↓</div>
                                <div class="sort-option" onclick="handleSort('initial-contact', 'population', 'asc')">Sort by Population ↑</div>
                                <div class="sort-option" onclick="handleSort('initial-contact', 'income', 'desc')">Sort by Income ↓</div>
                                <div class="sort-option" onclick="handleSort('initial-contact', 'income', 'asc')">Sort by Income ↑</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="cards-container"></div>
            </div>

            <div class="column" id="in-discussion" ondrop="drop(event)" ondragover="allowDrop(event)">
                <div class="column-header">
                    <span>In Discussion</span>
                    <div style="display: flex; align-items: center;">
                        <span class="column-count">0</span>
                        <div class="sort-button-container">
                            <button class="sort-button" onclick="toggleSort(this, 'in-discussion')">⋮</button>
                            <div class="sort-menu">
                                <div class="sort-option" onclick="handleSort('in-discussion', 'organization', 'asc')">Sort by Name (A-Z)</div>
                                <div class="sort-option" onclick="handleSort('in-discussion', 'organization', 'desc')">Sort by Name (Z-A)</div>
                                <div class="sort-option" onclick="handleSort('in-discussion', 'population', 'desc')">Sort by Population ↓</div>
                                <div class="sort-option" onclick="handleSort('in-discussion', 'population', 'asc')">Sort by Population ↑</div>
                                <div class="sort-option" onclick="handleSort('in-discussion', 'income', 'desc')">Sort by Income ↓</div>
                                <div class="sort-option" onclick="handleSort('in-discussion', 'income', 'asc')">Sort by Income ↑</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="cards-container"></div>
            </div>

            <div class="column" id="partnership-agreed" ondrop="drop(event)" ondragover="allowDrop(event)">
                <div class="column-header">
                    <span>Partnership Agreed</span>
                    <div style="display: flex; align-items: center;">
                        <span class="column-count">0</span>
                        <div class="sort-button-container">
                            <button class="sort-button" onclick="toggleSort(this, 'partnership-agreed')">⋮</button>
                            <div class="sort-menu">
                                <div class="sort-option" onclick="handleSort('partnership-agreed', 'organization', 'asc')">Sort by Name (A-Z)</div>
                                <div class="sort-option" onclick="handleSort('partnership-agreed', 'organization', 'desc')">Sort by Name (Z-A)</div>
                                <div class="sort-option" onclick="handleSort('partnership-agreed', 'population', 'desc')">Sort by Population ↓</div>
                                <div class="sort-option" onclick="handleSort('partnership-agreed', 'population', 'asc')">Sort by Population ↑</div>
                                <div class="sort-option" onclick="handleSort('partnership-agreed', 'income', 'desc')">Sort by Income ↓</div>
                                <div class="sort-option" onclick="handleSort('partnership-agreed', 'income', 'asc')">Sort by Income ↑</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="cards-container"></div>
            </div>

            <div class="column" id="partnership-active" ondrop="drop(event)" ondragover="allowDrop(event)">
                <div class="column-header">
                    <span>Partnership Active</span>
                    <div style="display: flex; align-items: center;">
                        <span class="column-count">0</span>
                        <div class="sort-button-container">
                            <button class="sort-button" onclick="toggleSort(this, 'partnership-active')">⋮</button>
                            <div class="sort-menu">
                                <div class="sort-option" onclick="handleSort('partnership-active', 'organization', 'asc')">Sort by Name (A-Z)</div>
                                <div class="sort-option" onclick="handleSort('partnership-active', 'organization', 'desc')">Sort by Name (Z-A)</div>
                                <div class="sort-option" onclick="handleSort('partnership-active', 'population', 'desc')">Sort by Population ↓</div>
                                <div class="sort-option" onclick="handleSort('partnership-active', 'population', 'asc')">Sort by Population ↑</div>
                                <div class="sort-option" onclick="handleSort('partnership-active', 'income', 'desc')">Sort by Income ↓</div>
                                <div class="sort-option" onclick="handleSort('partnership-active', 'income', 'asc')">Sort by Income ↑</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="cards-container"></div>
            </div>

            <div class="column" id="not-interested" ondrop="drop(event)" ondragover="allowDrop(event)">
                <div class="column-header">
                    <span>Not Interested</span>
                    <div style="display: flex; align-items: center;">
                        <span class="column-count">0</span>
                        <div class="sort-button-container">
                            <button class="sort-button" onclick="toggleSort(this, 'not-interested')">⋮</button>
                            <div class="sort-menu">
                                <div class="sort-option" onclick="handleSort('not-interested', 'organization', 'asc')">Sort by Name (A-Z)</div>
                                <div class="sort-option" onclick="handleSort('not-interested', 'organization', 'desc')">Sort by Name (Z-A)</div>
                                <div class="sort-option" onclick="handleSort('not-interested', 'population', 'desc')">Sort by Population ↓</div>
                                <div class="sort-option" onclick="handleSort('not-interested', 'population', 'asc')">Sort by Population ↑</div>
                                <div class="sort-option" onclick="handleSort('not-interested', 'income', 'desc')">Sort by Income ↓</div>
                                <div class="sort-option" onclick="handleSort('not-interested', 'income', 'asc')">Sort by Income ↑</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="cards-container"></div>
            </div>
        </div>
    </div>

    <button class="toggle-activity-log" onclick="toggleActivityLog()">📋</button>
    <div class="activity-log">
        <div class="activity-log-header">Activity Log</div>
        <div class="activity-log-content"></div>
    </div>

    <!-- Notes Popup -->
    <div id="notes-popup" class="notes-popup" style="display: none;">
        <div class="notes-header">
            <h2 id="notes-title">Notes</h2>
            <button class="close-notes" onclick="closeNotes()">×</button>
        </div>
        <div class="notes-content">
            <div class="notes-list"></div>
            <div class="add-note">
                <textarea id="newNoteText" placeholder="Add a new note..."></textarea>
                <button onclick="addNote()">Add Note</button>
            </div>
        </div>
    </div>

    <script src="/static/js/kanban.js"></script>
</body>
</html>